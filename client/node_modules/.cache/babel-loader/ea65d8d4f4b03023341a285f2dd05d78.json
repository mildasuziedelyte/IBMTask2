{"ast":null,"code":"import _regeneratorRuntime from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{useState,useEffect}from'react';//3rd party\nimport{Link}from\"react-router-dom\";import InfiniteScroll from\"react-infinite-scroll-component\";import MainVideo from\"../selectedPage/MainVideo\";//helpers\nimport{getSearched}from\"../helpers/youtubeAPI\";//compontents \nimport SingleCard from\"../singleCard/SingleCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SideBar=/*#__PURE__*/function(_React$Component){_inherits(SideBar,_React$Component);var _super=_createSuper(SideBar);function SideBar(){var _this;_classCallCheck(this,SideBar);_this=_super.call(this);_this.state={items:Array.from({length:5}),videos:[],limit:5};_this.fetchMoreData=function(){// a fake async api call like which sends\n// 20 more records in 1.5 secs\nsetTimeout(function(){_this.getSearched();_this.setState({items:_this.state.items.concat(Array.from({length:5}))});},1500);};return _this;}_createClass(SideBar,[{key:\"componentDidMount\",value:function componentDidMount(){this.getSearched();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this2=this;var propsId=this.props.id;if(prevProps.id!==this.props.id){var KEY=process.env.REACT_APP_KEY;var url=\"https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId=\".concat(this.props.id,\"&type=video&key=\").concat(KEY,\"&maxResults=20&pageToken=CBQQAA\");fetch(url).then(function(res){return res.json();}).then(function(res){_this2.setState({videos:res.items});});}}},{key:\"getSearched\",value:function(){var _getSearched=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var KEY,url,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;KEY=process.env.REACT_APP_KEY;url=\"https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId=\".concat(this.props.id,\"&type=video&key=\").concat(KEY,\"&maxResults=20&pageToken=CBQQAA\");_context.next=5;return fetch(url);case 5:res=_context.sent;_context.next=8;return res.json();case 8:data=_context.sent;this.setState({videos:data.items,limit:this.state.limit+5});return _context.abrupt(\"return\",data.items);case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(\"Failed to fetch\",_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,this,[[0,13]]);}));function getSearched(){return _getSearched.apply(this,arguments);}return getSearched;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{children:\"Related Videos\"}),/*#__PURE__*/_jsx(InfiniteScroll,{className:\"w-full flex flex-col\",dataLength:this.state.items.length,next:this.fetchMoreData,hasMore:this.state.limit<50?true:false,loader:/*#__PURE__*/_jsx(\"h4\",{children:\"Loading...\"}),children:this.state.videos&&this.state.videos.map(function(video,index){return/*#__PURE__*/_jsx(SingleCard,{video:video},index);})})]});}}]);return SideBar;}(React.Component);export default SideBar;","map":{"version":3,"sources":["/home/ugnius/IBM/ibm-youtube/youtube-ibm/src/components/sidebar/SideBar.jsx"],"names":["React","useState","useEffect","Link","InfiniteScroll","MainVideo","getSearched","SingleCard","SideBar","state","items","Array","from","length","videos","limit","fetchMoreData","setTimeout","setState","concat","prevProps","propsId","props","id","KEY","process","env","REACT_APP_KEY","url","fetch","then","res","json","data","console","log","map","video","index","Component"],"mappings":"+sBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA;AACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,iCAA3B,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,CACA;AAEA,OAAQC,WAAR,KAA0B,uBAA1B,CAGA;AACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,C,2FAGMC,CAAAA,O,8GACN,kBAAe,yCACX,wBADW,MAGXC,KAHW,CAGL,CACFC,KAAK,CAAEC,KAAK,CAACC,IAAN,CAAW,CAAEC,MAAM,CAAE,CAAV,CAAX,CADL,CAENC,MAAM,CAAC,EAFD,CAGNC,KAAK,CAAC,CAHA,CAHK,OAkDbC,aAlDa,CAkDG,UAAM,CACpB;AACA;AACAC,UAAU,CAAC,UAAM,CACf,MAAKX,WAAL,GACA,MAAKY,QAAL,CAAc,CACZR,KAAK,CAAE,MAAKD,KAAL,CAAWC,KAAX,CAAiBS,MAAjB,CAAwBR,KAAK,CAACC,IAAN,CAAW,CAAEC,MAAM,CAAE,CAAV,CAAX,CAAxB,CADK,CAAd,EAGD,CALS,CAKP,IALO,CAAV,CAMD,CA3DY,cAEd,C,qDAOD,4BAAoB,CACZ,KAAKP,WAAL,GAEL,C,kCACH,4BAAmBc,SAAnB,CAA8B,iBAC1B,GAAIC,CAAAA,OAAO,CAAC,KAAKC,KAAL,CAAWC,EAAvB,CAEA,GAAGH,SAAS,CAACG,EAAV,GAAiB,KAAKD,KAAL,CAAWC,EAA/B,CAAmC,CAE/B,GAAMC,CAAAA,GAAG,CAAGC,OAAO,CAACC,GAAR,CAAYC,aAAxB,CACA,GAAMC,CAAAA,GAAG,sFAA+E,KAAKN,KAAL,CAAWC,EAA1F,4BAA+GC,GAA/G,mCAAT,CACAK,KAAK,CAAED,GAAF,CAAL,CACKE,IADL,CACU,SAAAC,GAAG,QAAEA,CAAAA,GAAG,CAACC,IAAJ,EAAF,EADb,EAESF,IAFT,CAEc,SAAAC,GAAG,CAAE,CACP,MAAI,CAACb,QAAL,CAAc,CACVJ,MAAM,CAACiB,GAAG,CAACrB,KADD,CAAd,EAGH,CANT,EAOC,CAER,C,+GAEC,wKAEcc,GAFd,CAEoBC,OAAO,CAACC,GAAR,CAAYC,aAFhC,CAGcC,GAHd,sFAGgG,KAAKN,KAAL,CAAWC,EAH3G,4BAGgIC,GAHhI,0DAIyBK,CAAAA,KAAK,CAACD,GAAD,CAJ9B,QAIcG,GAJd,qCAKyBA,CAAAA,GAAG,CAACC,IAAJ,EALzB,QAKYC,IALZ,eAMK,KAAKf,QAAL,CAAc,CACZJ,MAAM,CAAEmB,IAAI,CAACvB,KADD,CAEbK,KAAK,CAAE,KAAKN,KAAL,CAAWM,KAAX,CAAiB,CAFX,CAAd,EANL,gCAYckB,IAAI,CAACvB,KAZnB,4DAeQwB,OAAO,CAACC,GAAR,CAAY,iBAAZ,cAfR,qE,iHA8BF,iBAAS,CACL,mBACJ,oCACI,qCADJ,cAEA,KAAC,cAAD,EAAgB,SAAS,CAAC,sBAA1B,CACU,UAAU,CAAE,KAAK1B,KAAL,CAAWC,KAAX,CAAiBG,MADvC,CAEU,IAAI,CAAE,KAAKG,aAFrB,CAGU,OAAO,CAAE,KAAKP,KAAL,CAAWM,KAAX,CAAmB,EAAnB,CAAwB,IAAxB,CAA+B,KAHlD,CAIU,MAAM,cAAE,kCAJlB,UAMW,KAAKN,KAAL,CAAWK,MAAX,EAAqB,KAAKL,KAAL,CAAWK,MAAX,CAAkBsB,GAAlB,CAAsB,SAACC,KAAD,CAAQC,KAAR,qBAE3C,KAAC,UAAD,EAAwB,KAAK,CAAED,KAA/B,EAAiBC,KAAjB,CAF2C,EAAtB,CANhC,EAFA,GADI,CAkBH,C,qBAjFqBtC,KAAK,CAACuC,S,EAqF5B,cAAe/B,CAAAA,OAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\n//3rd party\nimport {Link} from \"react-router-dom\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nimport MainVideo from \"../selectedPage/MainVideo\"\n//helpers\n\nimport {getSearched} from \"../helpers/youtubeAPI\";\n\n\n//compontents \nimport SingleCard from \"../singleCard/SingleCard\";\n\n\nclass SideBar extends React.Component {\nconstructor () {\n    super();\n}\n    state={\n        items: Array.from({ length: 5 }),\n    videos:[],\n    limit:5\n}\n\ncomponentDidMount() {\n        this.getSearched();\n       \n  }\ncomponentDidUpdate(prevProps) {\n    let propsId=this.props.id;\n   \n    if(prevProps.id !== this.props.id) {\n      \n        const KEY = process.env.REACT_APP_KEY;\n        const url=`https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId=${this.props.id}&type=video&key=${KEY}&maxResults=20&pageToken=CBQQAA`\n        fetch (url)\n            .then(res=>res.json())\n                .then(res=>{\n                    this.setState({\n                        videos:res.items\n                    })\n                })\n        }\n    \n}\n\n  async getSearched () {\n      try {\n          const KEY = process.env.REACT_APP_KEY;\n          const url=`https://www.googleapis.com/youtube/v3/search?part=snippet&relatedToVideoId=${this.props.id}&type=video&key=${KEY}&maxResults=20&pageToken=CBQQAA`\n          const res= await fetch(url)\n        const data = await res.json();\n       this.setState({\n         videos: data.items,\n        limit:(this.state.limit+5)\n        })\n      \n      \n        return (data.items);\n      }\n      catch (err) {\n          console.log(\"Failed to fetch\",err);\n      }\n    }\n\n  fetchMoreData = () => {\n    // a fake async api call like which sends\n    // 20 more records in 1.5 secs\n    setTimeout(() => {\n      this.getSearched();\n      this.setState({\n        items: this.state.items.concat(Array.from({ length: 5 })),\n      });\n    }, 1500);\n  };\n\nrender() {\n    return (\n<div>\n    <p>Related Videos</p>\n<InfiniteScroll className=\"w-full flex flex-col\"\n          dataLength={this.state.items.length}\n          next={this.fetchMoreData}\n          hasMore={this.state.limit < 50 ? true : false}\n          loader={<h4>Loading...</h4>}\n        >\n          {this.state.videos && this.state.videos.map((video, index) => (\n        \n           <SingleCard key={index} video={video}/>\n           \n          ))}\n        </InfiniteScroll>\n        </div>\n\n    )\n}\n\n}\n\nexport default SideBar;\n"]},"metadata":{},"sourceType":"module"}