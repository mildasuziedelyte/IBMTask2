{"ast":null,"code":"import _regeneratorRuntime from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/ugnius/IBM/ibm-youtube/youtube-ibm/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{useState,useEffect}from'react';//3rd party\nimport{Link}from\"react-router-dom\";import InfiniteScroll from\"react-infinite-scroll-component\";//helpers\nimport{getSearched}from\"../helpers/youtubeAPI\";//compontents \nimport SingleCard from\"../singleCard/SingleCard\";import{jsx as _jsx}from\"react/jsx-runtime\";var ResultContainer=/*#__PURE__*/function(_React$Component){_inherits(ResultContainer,_React$Component);var _super=_createSuper(ResultContainer);function ResultContainer(){var _this;_classCallCheck(this,ResultContainer);_this=_super.call(this);_this.state={items:Array.from({length:8}),videos:[],query:\"\",limit:8};_this.fetchMoreData=function(){setTimeout(function(){_this.getSearched();_this.setState({items:_this.state.items.concat(Array.from({length:8}))});},1500);};return _this;}_createClass(ResultContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.getSearched();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps!==this.props)this.getSearched();}},{key:\"getSearched\",value:function(){var _getSearched=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var KEY,url,res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;KEY=process.env.REACT_APP_KEY;url=\"https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&key=\".concat(KEY,\"&maxResults=\").concat(this.state.limit,\"&&q=\").concat(this.props.query,\"&pageToken=CBQQAA\");_context.next=5;return fetch(url);case 5:res=_context.sent;_context.next=8;return res.json();case 8:data=_context.sent;this.setState({videos:data.items,limit:this.state.limit+8});return _context.abrupt(\"return\",data.items);case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);console.log(\"Failed to fetch\",_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,this,[[0,13]]);}));function getSearched(){return _getSearched.apply(this,arguments);}return getSearched;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(InfiniteScroll,{className:\"ifs w-11/12 m-auto mt-5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3\",dataLength:this.state.items.length,next:this.fetchMoreData,hasMore:this.state.limit<50?true:false,loader:/*#__PURE__*/_jsx(\"h4\",{children:\"Loading...\"}),children:this.state.videos.map(function(video,index){return/*#__PURE__*/_jsx(SingleCard,{video:video},index);})})});}}]);return ResultContainer;}(React.Component);export default ResultContainer;","map":{"version":3,"sources":["/home/ugnius/IBM/ibm-youtube/youtube-ibm/src/components/searchResults/ResultContainer.jsx"],"names":["React","useState","useEffect","Link","InfiniteScroll","getSearched","SingleCard","ResultContainer","state","items","Array","from","length","videos","query","limit","fetchMoreData","setTimeout","setState","concat","prevProps","props","KEY","process","env","REACT_APP_KEY","url","fetch","res","json","data","console","log","map","video","index","Component"],"mappings":"+sBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA;AACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,cAAP,KAA2B,iCAA3B,CAEA;AAEA,OAAQC,WAAR,KAA0B,uBAA1B,CAGA;AACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,C,8CAGMC,CAAAA,e,8HACN,0BAAe,iDACX,wBADW,MAGXC,KAHW,CAGL,CACFC,KAAK,CAAEC,KAAK,CAACC,IAAN,CAAW,CAAEC,MAAM,CAAE,CAAV,CAAX,CADL,CAENC,MAAM,CAAC,EAFD,CAGNC,KAAK,CAAE,EAHD,CAINC,KAAK,CAAC,CAJA,CAHK,OAsCbC,aAtCa,CAsCG,UAAM,CAEpBC,UAAU,CAAC,UAAM,CACf,MAAKZ,WAAL,GACA,MAAKa,QAAL,CAAc,CACZT,KAAK,CAAE,MAAKD,KAAL,CAAWC,KAAX,CAAiBU,MAAjB,CAAwBT,KAAK,CAACC,IAAN,CAAW,CAAEC,MAAM,CAAE,CAAV,CAAX,CAAxB,CADK,CAAd,EAGD,CALS,CAKP,IALO,CAAV,CAMD,CA9CY,cAEd,C,6DAQD,4BAAoB,CAEZ,KAAKP,WAAL,GACL,C,kCACD,4BAAmBe,SAAnB,CAA8B,CAC5B,GAAGA,SAAS,GAAK,KAAKC,KAAtB,CACA,KAAKhB,WAAL,GACD,C,+GAGD,wKAEciB,GAFd,CAEoBC,OAAO,CAACC,GAAR,CAAYC,aAFhC,CAGYC,GAHZ,oFAG4FJ,GAH5F,wBAG8G,KAAKd,KAAL,CAAWO,KAHzH,gBAGqI,KAAKM,KAAL,CAAWP,KAHhJ,4CAIuBa,CAAAA,KAAK,CAACD,GAAD,CAJ5B,QAIYE,GAJZ,qCAKyBA,CAAAA,GAAG,CAACC,IAAJ,EALzB,QAKYC,IALZ,eAMK,KAAKZ,QAAL,CAAc,CACZL,MAAM,CAAEiB,IAAI,CAACrB,KADD,CAEbM,KAAK,CAAE,KAAKP,KAAL,CAAWO,KAAX,CAAiB,CAFX,CAAd,EANL,gCAWce,IAAI,CAACrB,KAXnB,4DAcQsB,OAAO,CAACC,GAAR,CAAY,iBAAZ,cAdR,qE,iHA4BF,iBAAS,CACL,mBACJ,kCAEA,KAAC,cAAD,EAAgB,SAAS,CAAC,6FAA1B,CACU,UAAU,CAAE,KAAKxB,KAAL,CAAWC,KAAX,CAAiBG,MADvC,CAEU,IAAI,CAAE,KAAKI,aAFrB,CAGU,OAAO,CAAE,KAAKR,KAAL,CAAWO,KAAX,CAAmB,EAAnB,CAAwB,IAAxB,CAA+B,KAHlD,CAIU,MAAM,cAAE,kCAJlB,UAMW,KAAKP,KAAL,CAAWK,MAAX,CAAkBoB,GAAlB,CAAsB,SAACC,KAAD,CAAQC,KAAR,qBAEtB,KAAC,UAAD,EAAyB,KAAK,CAAED,KAAhC,EAAkBC,KAAlB,CAFsB,EAAtB,CANX,EAFA,EADI,CAkBH,C,6BApE6BnC,KAAK,CAACoC,S,EAwEpC,cAAe7B,CAAAA,eAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\n//3rd party\nimport {Link} from \"react-router-dom\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\n\n//helpers\n\nimport {getSearched} from \"../helpers/youtubeAPI\";\n\n\n//compontents \nimport SingleCard from \"../singleCard/SingleCard\";\n\n\nclass ResultContainer extends React.Component {\nconstructor () {\n    super();\n}\n    state={\n        items: Array.from({ length: 8 }),\n    videos:[],\n    query: \"\",\n    limit:8\n}\n\ncomponentDidMount() {\n      \n        this.getSearched();\n  }\n  componentDidUpdate(prevProps) {\n    if(prevProps !== this.props)\n    this.getSearched();\n  }\n\n\n  async getSearched () {\n      try {\n          const KEY = process.env.REACT_APP_KEY;\n        const url=`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&key=${KEY}&maxResults=${this.state.limit}&&q=${this.props.query}&pageToken=CBQQAA`\n        const res= await fetch(url)\n        const data = await res.json();\n       this.setState({\n         videos: data.items,\n        limit:(this.state.limit+8)\n        })\n      \n        return (data.items);\n      }\n      catch (err) {\n          console.log(\"Failed to fetch\",err);\n      }\n    }\n\n  fetchMoreData = () => {\n  \n    setTimeout(() => {\n      this.getSearched();\n      this.setState({\n        items: this.state.items.concat(Array.from({ length: 8 })),\n      });\n    }, 1500);\n  };\n\nrender() {\n    return (\n<div>\n    \n<InfiniteScroll className=\"ifs w-11/12 m-auto mt-5 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3\"\n          dataLength={this.state.items.length}\n          next={this.fetchMoreData}\n          hasMore={this.state.limit < 50 ? true : false}\n          loader={<h4>Loading...</h4>}\n        >\n          {this.state.videos.map((video, index) => (\n        \n           <SingleCard  key={index} video={video}/>\n           \n          ))}\n        </InfiniteScroll>\n        </div>\n\n    )\n}\n\n}\n\nexport default ResultContainer;"]},"metadata":{},"sourceType":"module"}